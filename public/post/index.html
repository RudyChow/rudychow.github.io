<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Posts | Rudy&#39;s blog</title>
<meta name="keywords" content="">
<meta name="description" content="Posts - Rudy&#39;s blog">
<meta name="author" content="Rudy">
<link rel="canonical" href="https://rudychow.github.io/post/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.5cfc680b1eeaeef9efbced92d46c2a9e876b72ee14fba85846afc4cff9e6e6f8.css" integrity="sha256-XPxoCx7q7vnvvO2S1Gwqnodrcu4U&#43;6hYRq/Ez/nm5vg=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://rudychow.github.io/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://rudychow.github.io/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://rudychow.github.io/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://rudychow.github.io/apple-touch-icon.png">
<link rel="mask-icon" href="https://rudychow.github.io/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" type="application/rss+xml" href="https://rudychow.github.io/post/index.xml">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:title" content="Posts" />
<meta property="og:description" content="" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://rudychow.github.io/post/" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Posts"/>
<meta name="twitter:description" content=""/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://rudychow.github.io/post/"
    }
  ]
}
</script>
</head>

<body class="list" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://rudychow.github.io/" accesskey="h" title="Rudy&#39;s blog (Alt + H)">Rudy&#39;s blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://rudychow.github.io/archives/" title="archives">
                    <span>archives</span>
                </a>
            </li>
            <li>
                <a href="https://rudychow.github.io/categories/" title="categories">
                    <span>categories</span>
                </a>
            </li>
            <li>
                <a href="https://rudychow.github.io/tags/" title="tags">
                    <span>tags</span>
                </a>
            </li>
            <li>
                <a href="https://github.com/RudyChow" title="github">
                    <span>github</span>&nbsp;
                    <svg fill="none" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round"
                        stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12">
                        <path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"></path>
                        <path d="M15 3h6v6"></path>
                        <path d="M10 14L21 3"></path>
                    </svg>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main"> 
<header class="page-header">
  <h1>
    Posts
  </h1>
</header>

<article class="post-entry"> 
  <header class="entry-header">
    <h2>蛋白粉测评
    </h2>
  </header>
  <div class="entry-content">
    <p>总结一份蛋白粉的口味测评（纯个人主观）。
Optimum Nutrition
口味 渠道/价格 推荐度 评价 草莓 iherb(380) 京东(266) 4/5 人生中买的第一桶粉，草莓味总是不错的选择。 曲奇 京东(266) 2/5 有黑色颗粒（大概是曲奇碎），不好喝，甚至有点苦，每次都当凉茶一口闷。 ALLMAX
口味 渠道/价格 推荐度 评价 巧克力花生酱 iherb(307) 5/5 第一次也是唯一一次喝是在 2016 年，是我在 iherb 买的第二桶蛋白粉，味道口感已经忘了，总而言之就是好好喝。 BPI
口味 渠道/价格 推荐度 评价 香草饼 iherb(285) 3/5 买的第三桶蛋白粉。曾经的 iherb 真是 yyds，285 就能拿下一桶分离乳清。味道也记不清了，没那么好喝，但也没想象中那么差，中规中矩吧。 MusclePlarm
口味 渠道/价格 推荐度 评价 巧克力牛奶 iherb(227) 3/5 任何的巧克力蛋白粉单独加牛奶，都是好喝的。但是这一款，把两个味道 mixed 在一起，着实一般般。 草莓 iherb(250) 4/5 草莓味总是不错，但不至于太多，比上面的巧克力好一丢吧。 淇淋巧酥 iherb(180) 3/5 在 iherb 买的最后一桶蛋白粉。这一款是缓释蛋白，味道已经记不太清楚了，一般般吧。 巧克力 iherb(140) 3/5 140 一桶 6 磅增肌粉实在太香，巧克力味也不错。可惜实在太齁甜，而且增肌粉每次都是几大勺一起喝，每次喝完都怀疑人生。 iherb 自营...</p>
  </div>
  <footer class="entry-footer"><span title='2021-12-04 15:51:10 +0800 CST'>December 4, 2021</span>&nbsp;·&nbsp;Rudy</footer>
  <a class="entry-link" aria-label="post link to 蛋白粉测评" href="https://rudychow.github.io/post/%E6%9D%82/%E8%9B%8B%E7%99%BD%E7%B2%89%E6%B5%8B%E8%AF%84/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2>2021计划
    </h2>
  </header>
  <div class="entry-content">
    <p>学习：
至少读一本书
去年完成目标《MySQL技术内幕：InnoDB存储引擎》，今年目标未定，但会围绕自己兴趣或者工作需要进行。
至少看一个开源项目源码
去年完成目标 Redis，今年暂定是 Nginx 或 Docker。
生活：
坚持运动，体重保持在 140 斤内
去年增肌到 150 斤，无奈身边人都觉得太胖了，于是又减脂到 140 斤，后面长时间也会维持在这个体重内。
去年还完成了人生最重要的一件事——取掉右手肱骨的钢板。即使医生一直劝说手术的风险，还签了责任告知，最后我还是选择做了手术，现在还是心有余悸。手术后手臂恢复还算不错，健身时的各种不适感明显减少了，甚至可以做俯卧撑了。希望今年能在保证身体正常的前提下，进行更多的运动。
十分钟内能解决的事情不要拖
比如吃完饭后马上洗碗，洗完澡如果不再进食就顺便刷牙等等。这些事情分开做的时间也是一样的，但是顺手完成了心里愉悦度会高很多。再也不想准备上床睡觉时，突然想到碗还没洗，又或者还没刷牙时又要爬起来做事情。
进行一次出行
去年在疫情爆发前去了泰国，但是在 2020 年由于疫情，取消了出行的计划，希望今年可以在预期内出行。
早睡早起
尽力而为。</p>
  </div>
  <footer class="entry-footer"><span title='2021-02-06 14:00:56 +0800 CST'>February 6, 2021</span>&nbsp;·&nbsp;Rudy</footer>
  <a class="entry-link" aria-label="post link to 2021计划" href="https://rudychow.github.io/post/2021%E8%AE%A1%E5%88%92/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2>Ingress Nginx 部署
    </h2>
  </header>
  <div class="entry-content">
    <p>前提：
ingress 中 Nginx 的组件有两个，一个是 kubernetes 提供的，叫Ingress Nginx，一个是 Nginx 提供的，叫Nginx ingress，这里以Ingress Nginx为例。 因为网上大部分的安装教程因为版本和时间的差别，导致很多问题，所以此处以官网文档为准。 我所使用的 k8s 版本是 1.20.2。 安装步骤：
执行 yaml
因为自己是裸机环境，所以按照官网教程的Bare-metal去进行部署，需要执行kubectl apply -f https://raw.githubusercontent.com/kubernetes/ingress-nginx/controller-v0.43.0/deploy/static/provider/baremetal/deploy.yaml。
这里会自动拉取k8s.gcr.io/ingress-nginx/controller:v0.43.0@sha256:9bba603b99bf25f6d117cf1235b6598c16033ad027b143c90fa5b3cc583c5713镜像。由于某些原因，可以通过先提前拉取别人做好的 image。
$ docker pull pollyduan/ingress-nginx-controller:v0.43.0 $ docker tag pollyduan/ingress-nginx-controller:v0.43.0 k8s.gcr.io/ingress-nginx/controller:v0.43.0 由于 yaml 拉取镜像时会进行镜像校验，所以需要下载 yaml 下来并且去掉校验和。
$ sed -i &#39;s/@sha256:9bba603b99bf25f6d117cf1235b6598c16033ad027b143c90fa5b3cc583c5713//&#39; ingress-nginx.yaml 安装完后测试是否成功。
[root@k8s-master nginx]# kubectl get svc -n ingress-nginx NAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGE ingress-nginx-controller NodePort 10.96.168.229 &lt;none&gt; 80:31445/TCP,443:31344/TCP 44m ingress-nginx-controller-admission ClusterIP 10.96.4.89 &lt;none&gt; 443/TCP 44m [root@k8s-master nginx]# curl 10....</p>
  </div>
  <footer class="entry-footer"><span title='2021-01-27 20:01:41 +0800 CST'>January 27, 2021</span>&nbsp;·&nbsp;Rudy</footer>
  <a class="entry-link" aria-label="post link to Ingress Nginx 部署" href="https://rudychow.github.io/post/k8s/ingress-nginx%E9%83%A8%E7%BD%B2/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2>Calico个人理解
    </h2>
  </header>
  <div class="entry-content">
    <p>docker 的桥接网络 开启 docker 进程后，docker 会开启虚拟网桥（可以理解为 Linux 内的虚拟交换机）。
通过ip addr可以看到系统多出一个网卡docker0，通常 IP 是172.17.0.1/16：
$ ip addr show docker0 3: docker0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP group default link/ether 02:42:e4:63:84:b5 brd ff:ff:ff:ff:ff:ff inet 172.17.0.1/16 brd 172.17.255.255 scope global docker0 valid_lft forever preferred_lft forever inet6 fe80::42:e4ff:fe63:84b5/64 scope link valid_lft forever preferred_lft forever 通过ip route可以看到默认会写入一条路由，可以看到请求172.17.0.0/16地址的请求都会通过docker0发出：
$ ip route default via 192.168.9.1 dev wlp1s0 proto dhcp metric 600 default via 192.168.9.1 dev wlp1s0 proto dhcp src 192....</p>
  </div>
  <footer class="entry-footer"><span title='2021-01-24 12:41:09 +0800 CST'>January 24, 2021</span>&nbsp;·&nbsp;Rudy</footer>
  <a class="entry-link" aria-label="post link to Calico个人理解" href="https://rudychow.github.io/post/k8s/calico%E4%B8%AA%E4%BA%BA%E7%90%86%E8%A7%A3/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2>iproute2
    </h2>
  </header>
  <div class="entry-content">
    <p>大部分 Linux 中已经不再使用net-tools来进行网络配置了（包括我目前在用的 Manjaro 也是），所以有必要熟悉iproute2相关的命令。net-tools中主要使用ifconfig、route、arp和netstat，而iproute2中也有对应的ip和ss命令来替代。
net-tools iproute2 ifconfig ip link/ip addr route ip route arp ip neigh netstat ss ip 这个是iproute2中主要的命令，可以替代net-tools的ifconfig、route和arp。
ip link # 查看网络设备，但是不会查看到ip ip link # 启动/关闭某个网卡 ip link set interface up/down ip addr # 查看每个网络设备上的ip ip addr # 查看指定的网卡 ip addr show dev device # 为指定网卡添加/删除ip地址 ip addr add/del IPv4/IPv6 dev device # 清除指定网卡的所有ip ip addr flush dev device ip route # 查看路由表 ip route # 启动/关闭某个网卡 ip link set interface up/down ip route和route显示的格式不太一样：...</p>
  </div>
  <footer class="entry-footer"><span title='2021-01-23 13:59:11 +0800 CST'>January 23, 2021</span>&nbsp;·&nbsp;Rudy</footer>
  <a class="entry-link" aria-label="post link to iproute2" href="https://rudychow.github.io/post/linux/iproute2/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2>查询语句的访问方式
    </h2>
  </header>
  <div class="entry-content">
    <p>简单总结一下 MySQL 表的访问方式：
等值
const：
最多只能有一个匹配记录，这个方式应用在聚簇索引或唯一索引上。
eq_ref：
和 const 差不多的性能，不过用在连表上。当连接的表的条件是聚簇索引或者唯一索引（不为 null）时，会使用 eq_ref。
ref：
通过等值条件，可能匹配到多行数据，普通索引常用。当唯一索引可以为 null 时，cond is null由于可以匹配到多行数据，所以也是使用 ref。
ref_or_null：
匹配到多行数据，包括 null 时。cond = xx or cond is null这种条件，就会使用 ref_or_null。
范围
range：
=, &lt;&gt;, &gt;, &gt;=, &lt;, &lt;=, IS NULL, &lt;=&gt;, BETWEEN, LIKE, or IN() 时会使用的方式
子查询
unique_subquery：
聚簇索引或者唯一索引的情况下，IN 的子查询会使用 unique_subquery，如value IN (SELECT primary_key FROM single_table WHERE some_expr)。
index_subquery：
和 unique_subquery 差不多，不过作用于普通索引上，如value IN (SELECT key_column FROM single_table WHERE some_expr)。
其它...</p>
  </div>
  <footer class="entry-footer"><span title='2021-01-05 23:38:36 +0800 CST'>January 5, 2021</span>&nbsp;·&nbsp;Rudy</footer>
  <a class="entry-link" aria-label="post link to 查询语句的访问方式" href="https://rudychow.github.io/post/mysql/%E6%9F%A5%E8%AF%A2%E8%AF%AD%E5%8F%A5%E7%9A%84%E8%AE%BF%E9%97%AE%E6%96%B9%E5%BC%8F/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2>Join算法
    </h2>
  </header>
  <div class="entry-content">
    <p>MySQL 目前主要的 join 算法有两类：Hash Join 和 Nested-Loop Join。
Hash Join Hash Join 是 MySQL 在 8.0.18 后支持的连表算法，这个时候的 Hash Join 有两个阶段：
build
构建阶段下，MySQL 会将小的表作为构建，构建的 HashTable 以连接条件为 key，行数据为 value。一旦所有的数据都存储在 HashTable 中，就完成了构建阶段。
当构建阶段中，如果内存中的 HashTable 被用完，则其余数据会溢出到缓存块中，并以另一个 hash 算法去决定写入哪个缓存块。内存中的 HashTable 由变量join_buffer_size控制。
probe
探测阶段下，MySQL 从另一个表中读取每一行。对于每一行，都会使用连接条件的值作为查找键去查看 HashTable 是否有匹配的数据。对于每一个匹配项，就向客户端发送一个合并行。
如果 build 阶段溢出了，那么 probe 阶段下也会把循环的每一行写入缓存块。由于写入缓冲块和 build 阶段时用的是同一个 hash 算法，所以他们的缓存块号是一致的。当内存的 HashTable 已经匹配完，依次加载每一个对应的 build 和 probe 的缓存块进内存，再重新执行 probe 逻辑即可。
在这个版本中，Hash Join 有几个限制条件：
只能用在没有索引的等值的连接条件 只能用在内连，即不支持left join、right join、semijoin和antijoin。 但是在 8.0.20 后的版本，已经没有了这两个限制。（但在这个版本下，non-equi-join下如何进行 build 和 probe，我还没弄清楚）...</p>
  </div>
  <footer class="entry-footer"><span title='2021-01-03 23:42:34 +0800 CST'>January 3, 2021</span>&nbsp;·&nbsp;Rudy</footer>
  <a class="entry-link" aria-label="post link to Join算法" href="https://rudychow.github.io/post/mysql/join%E7%AE%97%E6%B3%95/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2>事务
    </h2>
  </header>
  <div class="entry-content">
    <p>事务是数据库区别于文件系统的重要特性之一。数据库系统引入事务的主要目的：事务会把数据库从一种一致状态转移为另一种一致状态。在数据库提交工作时，可以确保要么所有修改都已经保存了，要么所有修改都不保存。
特性 InnoDB 存储引擎中的事务完全符合 ACID 的特性，ACID 是以下 4 个词的缩写
原子性（atomicity）
原子性指整个数据库事务是不可分割的工作单位，只有使事务中所有的数据库操作都执行成功，才算整个事务成功。事务中任何一个 SQL 语句执行失败，已经执行成功的 SQL 语句也必须撤销，数据库状态应该退回到执行事务前的状态。
一致性（consistency）
一致性指事务将数据库从一种状态转变为下一种一致的状态。在事务开始之前和事务结束以后，数据库的完整性约束没有被破坏。
隔离性（isolation）
隔离性还有其它称呼，如并发控制、可串行化、锁等等。事务的隔离性要求每个读写事务的对象对其它事务的操作对象能互相分离，即该事务提交前对其它事务都不可见，通常这使用锁来实现。
持久性（durability）
事务一旦提交，其结果就是永久性的，即使发生宕机等故障，数据库也能将数据恢复。事务只能从本身角度来保证结果的永久性，但如果不是数据库本身发生故障，而是一些外部原因，如 RAID 卡损坏、自然灾害等原因导致数据库发生问题，那么所有提交数据可能都会丢失。因此持久性保证事务系统的高可靠性，而不是高可用性。
事务的隔离性由锁来实现。原子性、一致性、持久性通过数据库的 redo log 和 undo log 来完成。redo log 称为重做日志，用来保证事务的原子性和持久性。undo log 用来保证事务的一致性。
隔离级别 ISO 和 ANIS SQL 标准制定了四种事务隔离级别的标准，分别是：
READ UNCOMMITTED READ COMMITTED REPEATABLE READ SERIALIZABLE 事务并发执行时可能遇到的问题：
脏读：一个事务读到了另一个未提交事务修改过的数据。 不可重复读：一个事务只能读到另一个已经提交的事务修改过的数据，并且其他事务每对该数据进行一次修改并提交后，该事务都能查询得到最新值。 幻读：一个事务先根据某些条件查询出一些记录，之后另一个事务又向表中插入了符合这些条件的记录，原先的事务再次按照该条件查询时，能把另一个事务插入的记录也读出来。 隔离级别 脏读 不可重复读 幻读 READ UNCOMMITTED Possible Possible Possible READ COMMITTED Not Possible Possible Possible REPEATABLE READ Not Possible Not Possible Possible SERIALIZABLE Not Possible Not Possible Not Possible InnoDB 存储引擎默认支持的隔离级别是REPEATABLE READ，但是与标准 SQL 不同的是，InnoDB 存储引擎在REPEATABLE READ事务隔离级别下，使用Next-Key Lock锁的算法，避免了幻读的产生。所以说，InnoDB 存储引擎在默认的REPEATABLE READ的事务隔离级别下已经能完全保证事务的隔离性要求，即达到SERIALIZABLE隔离级别。...</p>
  </div>
  <footer class="entry-footer"><span title='2020-12-28 22:58:32 +0800 CST'>December 28, 2020</span>&nbsp;·&nbsp;Rudy</footer>
  <a class="entry-link" aria-label="post link to 事务" href="https://rudychow.github.io/post/mysql/%E4%BA%8B%E5%8A%A1/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2>undo日志
    </h2>
  </header>
  <div class="entry-content">
    <p>undo log 主要有两个作用：事务回滚和 MVCC。
到底是什么是 undo log ？前面说到 InnoDB 表空间存放着许多不同类型的页，undo log 就是其中的一种类型。它和 redo log 不同，是一种逻辑日志，记录着数据之前的样子。又因为 undo log 是表空间的一种页，所以在产生 undo log 之前，也会产生对应的 redo log。
类型 undo log 分为 insert undo log 和 update undo log。
insert undo log 是指在 insert 操作中产生的 undo log。因为 insert 操作的记录，指对事务本身可见，对其它事务不可见（事务隔离性），所以这种 undo log 可以在事务提交后直接删除，不需要进行 purge 操作。
update undo log 记录的是 delete 和 update 操作产生的 undo log。该 undo log 可能需要提供 MVCC 机制，因此不能在事务提交时进行删除。提交时放入 undo log 链表，等待 purge 线程进行最后的删除。
回滚指针 从数据页中的数据行的格式了解 undo log：...</p>
  </div>
  <footer class="entry-footer"><span title='2020-12-13 21:33:54 +0800 CST'>December 13, 2020</span>&nbsp;·&nbsp;Rudy</footer>
  <a class="entry-link" aria-label="post link to undo日志" href="https://rudychow.github.io/post/mysql/undo%E6%97%A5%E5%BF%97/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2>B&#43;树查询
    </h2>
  </header>
  <div class="entry-content">
    <p>B&#43; 树是一种多路平衡树，通过 B 树演化而来。
我们知道从一组有序数字数组中查找目标记录，使用二分查找法（Binary Search）是一种有效的方式，复杂度达到 O(log2n)。但是如果要在几个分开的有序数组中找到目标记录，要怎样才比较有效率？
假设有 4 个数组，每个数组最多只能存放 4 个元素，现在需要在这四个数组中找到目标 10：
page1 := []int{1, 2, 3, 4} page2 := []int{5, 6, 7, 8} page3 := []int{9, 10, 11, 12} page4 := []int{13, 14, 15, 16} 第一个想法是把所有数组合并起来，再进行二分查找，这样复杂度还是 O(log2n)。上面代码中每一个数组，在 MySQL 中其实是一个页，也是 InnoDB 存放在磁盘上的最小单位。如果在 MySQL 中要把所有页的数据合并在一起，再进行二分查找，那么当数据页非常多的时候，内存会非常吃紧，所以这不算是一个好的方案。
换一个想法，现在从每个数组中取出一个最小数，作为当前数组的代表，此时可以抽取出 1、5、9、13。因为每个数组是有序的，所以这几个代表，可以表示一个区间：1 表示 [1,5) 的区间，5 表示 [5,9) 的区间，9 表示 [9,13) 的区间，13 表示 [13,&#43;∞) 的区间。所以在这 4 个数字中，你仍可以使用二分查找的方式，虽然这里面没有 10 这个数，但是可以得知 10 是属于 9 这个代表的，因为 10 属于 [9,13) 这个区间。最后，通过 9 这个代表，找到page3这个数组，并且在里面通过二分查找的方式找到 10 即可。...</p>
  </div>
  <footer class="entry-footer"><span title='2020-12-13 17:53:23 +0800 CST'>December 13, 2020</span>&nbsp;·&nbsp;Rudy</footer>
  <a class="entry-link" aria-label="post link to B&#43;树查询" href="https://rudychow.github.io/post/mysql/b&#43;%E6%A0%91%E6%9F%A5%E8%AF%A2/"></a>
</article>
<footer class="page-footer">
  <nav class="pagination">
    <a class="next" href="https://rudychow.github.io/post/page/2/">Next&nbsp;&nbsp;»
    </a>
  </nav>
</footer>
    </main>
    
<footer class="footer">
    <span>&copy; 2023 <a href="https://rudychow.github.io/">Rudy&#39;s blog</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
